{"version":3,"sources":["script.js"],"names":[],"mappings":"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","file":"script-compiled.js","sourcesContent":["/**\n * Niðurteljari!\n */\nclass Countdown {\n  /**\n   * Finnur container fyrir niðurteljara og form.\n   * Bindur submit eventhandler við form.\n   */\n  constructor() {\n    this.keyName = 'countdown';\n    this.container = document.querySelector('.countdown');\n    this.form = document.querySelector('form');\n\n    this.form.addEventListener('submit', this.submit.bind(this));\n  }\n\n  /**\n   * Sækir gögn úr localStorage eftir this.keyName\n   * Ef gögn eru til, hleður þeim inn með því að kalla í this.create()\n   */\n  load() {\n    const data = JSON.parse(window.localStorage.getItem('data'));\n    if (JSON.parse(window.localStorage.getItem('data')) != null) {\n      this.date = Date.parse(data.date);\n      this.title = data.title;\n\n      this.hideForm();\n      this.create(this.title, this.date);\n    }\n  }\n\n  /**\n   * Tekur við title sem streng og date sem Date hlut\n   * Vistar sem json gögn í localStorage undir this.keyName\n   */\n  save(titleX, dateX) {\n    const data = JSON.stringify({ date: dateX, title: titleX });\n    window.localStorage.setItem('data', data);\n  }\n\n  /**\n   * Handler fyrir submit á formi.\n   * Sækir gögn úr formi og kallar í this.parseDate()\n   * Vistar gögn með this.save() og sýnir niðurteljara með this.create()\n   */\n  submit(e) {\n    e.preventDefault();\n\n    const title = this.form.querySelector('input[type=text]');\n    const date = this.form.querySelector('input[type=date]');\n    const time = this.form.querySelector('input[type=time]');\n\n    const nyDagsetning = this.parseDate(date.value, time.value);\n    this.save(title.value, nyDagsetning);\n    this.create(title.value, nyDagsetning);\n  }\n\n  /**\n   * Tekur við:\n   *  - date sem streng á forminu \"yyyy-mm-dd\", t.d. \"2017-11-06\"\n   *  - time sem streng á forminu \"hh:mm\", t.d. \"09:00\"\n   * Skilar date hlut með gögnum úr date og time\n   */\n  parseDate(date, time) {\n    const ar = date.substring(0, 4);\n    const man = Number(date.substring(5, 7)) - 1;\n    const dag = date.substring(8, 10);\n    const klst = time.substring(0, 2);\n    const min = time.substring(3, 5);\n\n    const nyDagsetning = new Date(ar, man, dag, klst, min);\n    return nyDagsetning;\n  }\n\n  /**\n   * Býr til element fyrir niðurteljara og bætir við this.container\n   * Setur this.date sem dagsetningu sem talið er niður að\n   * Setur this.element sem element sem geymir niðurteljara\n   * Bætir við \"eyða\" takka sem sér um að eyða niðurteljara með this.delete\n   * Byrjar niðurteljara með this.startCounter() og\n   * felur form með this.hideForm()\n   */\n  create(title, date) {\n    this.date = date;\n    this.title = title;\n\n    // Finnum aðal div\n    const container = document.querySelector('.countdown');\n\n    // Gerum div fyrir heading os setjum á réttan stað\n    const heading = document.createElement('div');\n    container.appendChild(heading);\n    heading.classList.add('countdown__heading');\n    heading.appendChild(document.createTextNode(this.title));\n    container.appendChild(heading);\n\n    // Gerum div fyrir teljaran - this.element\n    this.element = container.appendChild(document.createElement('div'));\n    this.element.classList.add('countdown__container');\n\n    // Gerum eyða takkann og setjum á réttan stað\n    const cancel = document.createElement('button');\n    cancel.appendChild(document.createTextNode('Eyða'));\n    cancel.classList.add('button');\n    container.appendChild(cancel);\n    cancel.addEventListener('click', this.delete.bind(this));\n\n    // Felum formið sjálft og störtum teljaranum\n    this.hideForm();\n    this.startCounter();\n  }\n\n  /**\n   * Felur form með CSS\n   */\n  hideForm() {\n    document.querySelector('.form').style.display = 'none';\n  }\n\n  /**\n   * Sýnir form með CSS\n   */\n  showForm() {\n    document.querySelector('.form').style.display = 'block';\n  }\n\n  /**\n   * Byrjar niðurteljara með this.count() og keyrir á 1000ms fresti\n   * með window.setInterval og setur id á teljara í this.interval\n   */\n  startCounter() {\n    this.count(); // Set þessa línu fyrir setInterval til að teljarinn birtist líka fyrstu sekúnduna\n    const that = this; // Til að geta vísað í conut inni í setInterval\n    this.interval = window.setInterval(function() { \n      return that.count();\n    }, 1000);\n  }\n\n  /**\n   * Stöðvar teljara með window.clearInterval á this.interval\n   */\n  stopCounter() {\n    window.clearInterval(this.interval);\n  }\n\n  /**\n   * Býr til element sem heldur utan um teljara, á forminu:\n   * <div class=\"countdown__box\">\n   *   <span class=\"countdown__num\">num</span>\n   *   <span class=\"countdown__title\">title</span>\n   * </div>\n   * og skilar element\n   */\n  createElement(num, title) {\n    const box = document.createElement('div');\n    box.classList.add('countdown__box');\n    const number = document.createElement('span');\n    number.classList.add('countdown__num');\n    const titleBox = document.createElement('span');\n    titleBox.classList.add('countdown__title');\n    number.appendChild(document.createTextNode(num));\n    titleBox.appendChild(document.createTextNode(title));\n    box.appendChild(number);\n    box.appendChild(titleBox);\n    return box;\n  }\n\n  delete() {\n    // Hendir öllu úr this.element\n    while (this.container.firstChild) {\n      this.container.removeChild(this.container.firstChild);\n    }\n\n    // Hreinsar localStorage, stoppar counter loopu, hreinsar formið og birtir formið\n    localStorage.clear();\n    this.stopCounter();\n    this.form.reset();\n    this.showForm();\n  }\n\n  /**\n   * Tekur við remaining sem eru millisekúndur í dagsetningu sem talið er\n   * niður í.\n   * Útbýr og skilar element sem inniheldur element fyrir daga, klukkustundir,\n   * mínútur og sekúndur þar til remaining gerist. Hver „partur“ er búinn til\n   * með kalli í this.createElement\n   */\n  countdown(remaining) {\n    const totalSecs = remaining / 1000;\n\n    const days = Math.floor(totalSecs / (60 * 60 * 24));\n    const daysElement = this.createElement(days, 'Dagar');\n    const hours = Math.floor(totalSecs / (60 * 60)) - (days * 24);\n    const hoursElement = this.createElement(hours, 'Klst.');\n    const mins = Math.floor(totalSecs / 60) - (days * 24 * 60) - (hours * 60);\n    const minsElement = this.createElement(mins, 'Mín.');\n    const secs = Math.floor(totalSecs) - (days * 24 * 60 * 60) - (hours * 60 * 60) - (mins * 60);\n    const secsElement = this.createElement(secs, 'Sek.');\n\n    const container = document.createElement('div');\n    container.classList.add('countdown__container');\n    container.appendChild(daysElement);\n    container.appendChild(hoursElement);\n    container.appendChild(minsElement);\n    container.appendChild(secsElement);\n    return container;\n  }\n\n  /**\n   * Telur niður.\n   * Fjarlægir allt úr this.element (ef eitthvað er þar) og athugar síðan hvort\n   * this.date (dagsetning sem talið er niður að) sé liðin og ef svo er birtir\n   * textann \"Komið!\" og stoppa teljara með this.stopCounter()\n   * Ef ekki liðið uppfærir teljara með því að bæta element úr this.countdown()\n   * við this.element\n   */\n  count() {\n    // Tæmi this.element\n    while (this.element.firstChild) {\n      this.element.removeChild(this.element.firstChild);\n    }\n    const nuna = new Date();\n    const remaining = this.date - nuna;\n    if (remaining > 0) {\n      const teljarinn = this.countdown(remaining);\n      this.element.appendChild(teljarinn);\n    } else {\n      this.element.appendChild(document.createTextNode('Komið!'));\n      this.stopCounter();\n    }\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const countdown = new Countdown();\n  countdown.load();\n});\n"]}